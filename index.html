<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç¾èªå–®å­—å·¦å³å°æˆ° (ä¿®æ­£ç‰ˆ)</title>
    <style>
        :root {
            --p1-bg: #e3f2fd; --p1-dark: #1565c0;
            --p2-bg: #fff3e0; --p2-dark: #e65100; /* P2 æ”¹ç‚ºæ©˜è‰²ç³»ï¼Œå°æ¯”æ›´æ¸…æ™° */
        }
        body, html {
            margin: 0; padding: 0; height: 100%; width: 100%;
            overflow: hidden; font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: #222; 
            touch-action: none; /* ç¦æ­¢ç€è¦½å™¨é è¨­æ‰‹å‹¢ */
            user-select: none;  /* ç¦æ­¢é¸å–æ–‡å­— */
        }

        /* ä¸»å®¹å™¨ï¼šå·¦å³åˆ†å‰² */
        #game-container {
            display: flex;
            flex-direction: row; /* å·¦å³æ’åˆ— */
            height: 100%; width: 100%;
        }

        /* ç©å®¶å€åŸŸé€šç”¨æ¨£å¼ */
        .player-area {
            flex: 1; /* å„ä½” 50% å¯¬åº¦ */
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* å…©åˆ— */
            grid-template-rows: repeat(3, 1fr);    /* ä¸‰è¡Œ */
            gap: 12px;
            padding: 15px;
            align-items: center;
            justify-items: center;
            position: relative;
        }

        /* å·¦å´ç©å®¶ (P1) */
        #p1-area {
            background-color: var(--p1-bg);
            border-right: 2px solid #aaa;
        }

        /* å³å´ç©å®¶ (P2) - å·²ä¿®æ­£ï¼šç§»é™¤æ—‹è½‰ï¼Œæ–¹å‘è½‰æ­£ */
        #p2-area {
            background-color: var(--p2-bg);
        }

        /* å–®å­—å¡ç‰‡æ¨£å¼ */
        .word-card {
            width: 90%; height: 85%;
            background: white;
            border-radius: 15px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.6rem; font-weight: bold; color: #444;
            box-shadow: 0 4px 0 rgba(0,0,0,0.2);
            cursor: pointer;
            transition: transform 0.1s;
            text-align: center;
            word-break: break-word;
            border: 2px solid transparent; /* é ç•™é‚Šæ¡†ä½ç½® */
        }
        
        .word-card:active { 
            transform: scale(0.95); 
            box-shadow: 0 2px 0 rgba(0,0,0,0.2); 
        }

        /* ç‹€æ…‹æ¨£å¼ */
        .correct { 
            background: #66bb6a !important; 
            color: white !important; 
            border-color: #2e7d32 !important;
            animation: pop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .wrong { 
            background: #ef5350 !important; 
            color: white !important; 
            animation: shake 0.4s;
        }

        /* ä¸­å¤®æ§åˆ¶é … */
        #center-ui {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000; 
            display: flex; flex-direction: column; align-items: center;
            pointer-events: none;
            width: 100%;
        }

        /* è¨ˆåˆ†æ¿ */
        .score-board {
            background: #333; color: white;
            padding: 10px 40px; border-radius: 50px;
            font-size: 1.4rem; font-weight: bold;
            display: flex; gap: 40px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            border: 2px solid #fff;
        }
        .p1-score { color: #64b5f6; }
        .p2-score { color: #ffb74d; }

        /* å–‡å­æŒ‰éˆ• */
        #speaker-btn {
            margin-top: 15px; width: 64px; height: 64px;
            background: white; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.8rem; cursor: pointer;
            box-shadow: 0 0 15px rgba(255,255,255,0.6);
            pointer-events: auto; /* å…è¨±é»æ“Š */
            border: 4px solid #333;
        }
        #speaker-btn:active { background: #eee; }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-6px) rotate(-2deg); }
            40% { transform: translateX(6px) rotate(2deg); }
            60% { transform: translateX(-6px); }
            80% { transform: translateX(6px); }
        }
        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>

<div id="game-container">
    <div id="p1-area" class="player-area"></div>
    
    <div id="p2-area" class="player-area"></div>
</div>

<div id="center-ui">
    <div class="score-board">
        <span class="p1-score">P1: <span id="s1">0</span></span>
        <span class="p2-score">P2: <span id="s2">0</span></span>
    </div>
    <div id="speaker-btn">ğŸ”Š</div>
</div>

<script>
    // å–®å­—è³‡æ–™åº« (å¯åœ¨æ­¤æ“´å……)
    const vocabulary = [
        // å¯µç‰©èˆ‡è¾²å ´å‹•ç‰©
    {en: 'Dog', zh: 'ç‹—'}, {en: 'Cat', zh: 'è²“'},
    {en: 'Rabbit', zh: 'å…”å­'}, {en: 'Hamster', zh: 'å€‰é¼ '},
    {en: 'Cow', zh: 'ä¹³ç‰›'}, {en: 'Pig', zh: 'è±¬'},
    {en: 'Sheep', zh: 'ç¶¿ç¾Š'}, {en: 'Horse', zh: 'é¦¬'},
    {en: 'Duck', zh: 'é´¨å­'}, {en: 'Chicken', zh: 'é›'},

    // é‡ç”Ÿå‹•ç‰©
    {en: 'Lion', zh: 'ç…å­'}, {en: 'Tiger', zh: 'è€è™'},
    {en: 'Elephant', zh: 'å¤§è±¡'}, {en: 'Monkey', zh: 'çŒ´å­'},
    {en: 'Zebra', zh: 'æ–‘é¦¬'}, {en: 'Giraffe', zh: 'é•·é ¸é¹¿'},
    {en: 'Bear', zh: 'ç†Š'}, {en: 'Panda', zh: 'ç†Šè²“'},
    {en: 'Fox', zh: 'ç‹ç‹¸'}, {en: 'Wolf', zh: 'ç‹¼'},
    {en: 'Kangaroo', zh: 'è¢‹é¼ '}, {en: 'Koala', zh: 'ç„¡å°¾ç†Š'},
    {en: 'Deer', zh: 'é¹¿'}, {en: 'Hippo', zh: 'æ²³é¦¬'},

    // æµ·æ´‹èˆ‡æ°´ç”Ÿå‹•ç‰©
    {en: 'Fish', zh: 'é­š'}, {en: 'Shark', zh: 'é¯Šé­š'},
    {en: 'Whale', zh: 'é¯¨é­š'}, {en: 'Dolphin', zh: 'æµ·è±š'},
    {en: 'Octopus', zh: 'ç« é­š'}, {en: 'Crab', zh: 'èƒèŸ¹'},
    {en: 'Turtle', zh: 'çƒé¾œ'}, {en: 'Penguin', zh: 'ä¼éµ'},
    {en: 'Frog', zh: 'é’è›™'}, {en: 'Crocodile', zh: 'é±·é­š'},

    // æ˜†èŸ²èˆ‡é³¥é¡
    {en: 'Bird', zh: 'é³¥'}, {en: 'Eagle', zh: 'è€é·¹'},
    {en: 'Owl', zh: 'è²“é ­é·¹'}, {en: 'Butterfly', zh: 'è´è¶'},
    {en: 'Bee', zh: 'èœœèœ‚'}, {en: 'Ant', zh: 'èèŸ»'}
    ];

    let currentTarget = "";
    let scores = { p1: 0, p2: 0 };
    let isProcessing = false;

    const synth = window.speechSynthesis;
    const speakerBtn = document.getElementById('speaker-btn');

    // æ’­æ”¾ç™¼éŸ³
    function speakWord() {
        if (!currentTarget) return;
        
        // åœæ­¢ä¹‹å‰çš„ç™¼éŸ³ï¼Œé¿å…é‡ç–Š
        synth.cancel();

        const utter = new SpeechSynthesisUtterance(currentTarget);
        utter.lang = 'en-US';
        utter.rate = 0.8; // ç¨å¾®æ”¾æ…¢èªé€Ÿé©åˆæ•™å­¸
        synth.speak(utter);
    }

    // é–‹å§‹æ–°çš„ä¸€å±€
    function newRound() {
        isProcessing = false;
        // éš¨æ©Ÿé¸é¡Œ
        currentTarget = vocabulary[Math.floor(Math.random() * vocabulary.length)].en;
        
        renderCards('p1-area');
        renderCards('p2-area');
        
        // å»¶é²æ’­æ”¾è²éŸ³
        setTimeout(speakWord, 500);
    }

    // ç”¢ç”Ÿå¡ç‰‡
    function renderCards(areaId) {
        const container = document.getElementById(areaId);
        container.innerHTML = "";
        
        // éš¨æ©Ÿå–å‡º 6 å€‹å–®å­— (å«ç­”æ¡ˆ)
        let options = [...vocabulary].sort(() => 0.5 - Math.random()).slice(0, 6);
        
        // ç¢ºä¿ç­”æ¡ˆä¸€å®šåœ¨é¸é …ä¸­
        if (!options.find(w => w.en === currentTarget)) {
            options[0] = vocabulary.find(w => w.en === currentTarget);
        }
        
        // å†æ¬¡æ‰“äº‚é †åº
        options.sort(() => 0.5 - Math.random());

        options.forEach(word => {
            const card = document.createElement('div');
            card.className = 'word-card';
            card.innerText = word.en;
            
            // ä½¿ç”¨ pointerdown ç¢ºä¿å¤šé»è§¸æ§åæ‡‰éˆæ•
            card.onpointerdown = (e) => checkAnswer(word.en, areaId, e.currentTarget);
            
            container.appendChild(card);
        });
    }

    // æª¢æŸ¥ç­”æ¡ˆ
    function checkAnswer(selected, areaId, el) {
        if (isProcessing) return; // é–å®šé˜²æ­¢é‡è¤‡å¾—åˆ†

        if (selected === currentTarget) {
            isProcessing = true;
            el.classList.add('correct');
            
            // å¾—åˆ†é‚è¼¯
            if (areaId === 'p1-area') scores.p1++; else scores.p2++;
            updateScore();
            
            // 1.2ç§’å¾Œä¸‹ä¸€é¡Œ
            setTimeout(newRound, 1200);
        } else {
            el.classList.add('wrong');
            // 0.5ç§’å¾Œç§»é™¤éŒ¯èª¤ç´…è‰²
            setTimeout(() => el.classList.remove('wrong'), 500);
        }
    }

    function updateScore() {
        document.getElementById('s1').innerText = scores.p1;
        document.getElementById('s2').innerText = scores.p2;
    }

    // ç¶å®šå–‡å­æŒ‰éˆ•
    speakerBtn.onclick = speakWord;

    // ç¬¬ä¸€æ¬¡é»æ“Šç•«é¢å•Ÿå‹•éŠæˆ² (ç€è¦½å™¨éœ€è¦ä½¿ç”¨è€…äº’å‹•æ‰èƒ½æ’­æ”¾è²éŸ³)
    document.body.addEventListener('pointerdown', function start() {
        speakerBtn.innerText = "ğŸ”Š";
        newRound();
        document.body.removeEventListener('pointerdown', start);
    }, { once: true });

    // åˆå§‹æ–‡å­—
    speakerBtn.innerText = "GO";

</script>
</body>
</html>

